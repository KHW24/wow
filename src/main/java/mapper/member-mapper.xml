<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Member">
	<!-- resultMap의 id는 알아볼 수 있게 지정해야함 type은 vo의 루트를 입력하면됨 -->
		<!-- vo에서 지정했던 필드들 모두 입력. property는 vo에서 썼던 필드이름이고, column은 SQL문에서의 테이블 컬럼명 입력해야함 -->
		<!-- 먼저 primary key 선언 -->
	<resultMap id="resultMember" type="Member">
		<id property="id" column="ID" />	
		<result property="nickname" column="NICKNAME" />
		<result property="password" column="PASSWORD" />
		<result property="email" column="EMAIL" />
		<result property="postCode" column="POSTCODE" />
		<result property="roadAddress" column="ROADADDRESS" />
		<result property="detailAddress" column="DETAILADDRESS" />
		<result property="alert_cnt" column="ALERT_CNT" />
		<result property="enabled" column="ENABLED"/>
	</resultMap>
	
	<!-- INSERT -->
	<insert id="insertMember" parameterType="Member">
		INSERT INTO MEMBER VALUES(#{id}, #{nickname}, #{password}, #{email}, #{postCode}, #{roadAddress}, #{detailAddress}, DEFAULT, DEFAULT)
	</insert>
	
	<!-- SELECT MEMBER -->
	<select id="selectMember" parameterType="String" resultMap="resultMember">
		SELECT * FROM MEMBER WHERE ID = #{id}
	</select>
	
	<!--UPDATE  -->
	<update id="updateMember" parameterType="Member">
		UPDATE MEMBER SET NICKNAME=#{nickname}, PASSWORD=#{password}, EMAIL=#{email}, ADDRESS=#{address} where id=#{id}
	</update>
	
	<!-- CHECK NICKNAME -->
	<select id="checkNickname" resultType="int">
		SELECT COUNT(*) AS CNT FROM MEMBER WHERE NICKNAME = #{nickname}
	</select>
		
</mapper>